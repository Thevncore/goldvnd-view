<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Gold Price Chart</title><script src="https://cdn.jsdelivr.net/npm/chart.js"></script><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script><style> .chart-container { width: 95vw; margin: 20px auto; } canvas { width: 100%; } h1, h3, h5 { text-align: center; } </style></head><body><div class="container-fluid py-3 d-flex flex-column gap-3"><div class="container-fluid d-flex flex-column gap-3 px-0"><div class="row gy-3"><div class="col-12 col-md-12 col-lg-12"><div class="card shadow"><h5 class="card-header">Giá hiện tại</h5><div class="card-body"><div class="row"><div class="col"><h5>MUA</h5><h3 id="current-buy-price" class="fw-bold"></h3></div><div class="col"><h5>BÁN</h5><h3 id="current-sell-price" class="fw-bold"></h3></div></div></div></div></div><div class="col-12 col-md-6 col-lg-4"><div class="card shadow"><h5 class="card-header">Chênh lệch hôm nay</h5><div class="card-body"><div class="chart-container w-100"><h1 id="t-fluctuations" class="fw-bold"></h1></div></div></div></div><div class="col-12 col-md-6 col-lg-4"><div class="card shadow"><h5 class="card-header">Chênh lệch hôm qua</h5><div class="card-body"><div class="chart-container w-100"><h1 id="1day-fluctuations" class="fw-bold"></h1></div></div></div></div><div class="col-12 col-md-6 col-lg-4"><div class="card shadow"><h5 class="card-header">Chênh lệch tuần qua</h5><div class="card-body"><div class="chart-container w-100"><h1 id="1week-fluctuations" class="fw-bold"></h1></div></div></div></div></div></div><div class="card shadow"><h5 class="card-header">Main index</h5><div class="card-body"><div class="chart-container w-100"><canvas id="goldPriceChart"></canvas></div></div></div></div><script> 
function cf(data,startDate,endDate){startDate.setHours(0,0,0,0);endDate.setHours(23,59,59,999);const fd=data.filter(i_=>{const i=i_.Date;return i>=startDate&&i<=endDate});fd.sort((a,b)=>a.Date-b.Date);if(fd.length===0||fd.length===1){return 0}const minBuyValue=Math.min(...fd.map(i_=>i_.BuyValue));const maxBuyValue=Math.max(...fd.map(i_=>i_.BuyValue));return maxBuyValue-minBuyValue}function ufe(elementId,fluctuation){const element=document.getElementById(elementId);element.innerText=` ${fluctuation.toLocaleString("en-US")} VND`;if(fluctuation>0){element.style.color="green"}else if(fluctuation<0){element.style.color="red"}else{element.style.color="black"}}const canvas=document.getElementById("goldPriceChart");function rszc(){canvas.style.width=canvas.width=window.innerWidth+"px";canvas.style.height=canvas.height=window.innerHeight+"px"}window.addEventListener("resize",rszc);rszc();const t=new Date;const _tdv=`${String(t.getDate()).padStart(2,"0")}/${String(t.getMonth()+1).padStart(2,"0")}/${t.getFullYear()}`;const fromDate=new Date(t);fromDate.setDate(t.getDate()-30);const _fdv=`${String(fromDate.getDate()).padStart(2,"0")}/${String(fromDate.getMonth()+1).padStart(2,"0")}/${fromDate.getFullYear()}`;fetch("https://sjc.com.vn/GoldPrice/Services/PriceService.ashx",{referrer:"https://sjc.com.vn/bieu-do-gia-vang",referrerPolicy:"strict-origin-when-cross-origin",body:`method=GetGoldPriceHistory&goldPriceId=33&fromDate=${_fdv}&toDate=${_tdv}`,method:"POST",mode:"cors",credentials:"omit"}).then(response=>response.json()).then(data=>{const cbr=data.data[data.data.length-1].BuyValue;const cbre=document.getElementById("current-buy-price");cbre.innerText=`${cbr.toLocaleString("en-US")} VND`;const csr=data.data[data.data.length-1].SellValue;const csre=document.getElementById("current-sell-price");csre.innerText=`${csr.toLocaleString("en-US")} VND`;data.data.forEach(i_=>{i_.Date=new Date(parseInt(i_.GroupDate.match(/\d+/)[0]))});const chartData=data.data.map(i_=>({buyValue:i_.BuyValue,sellValue:i_.SellValue,groupDate:new Date(parseInt(i_.GroupDate.match(/\d+/)[0])).toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}));const labels=chartData.map(i_=>i_.groupDate);const buyValues=chartData.map(i_=>i_.buyValue);const sellValues=chartData.map(i_=>i_.sellValue);const ctx=canvas.getContext("2d");new Chart(ctx,{type:"line",data:{labels:labels,datasets:[{label:"Buy",data:buyValues,borderColor:"blue",backgroundColor:"rgba(0, 0, 255, 0.1)",fill:true},{label:"Sell",data:sellValues,borderColor:"red",backgroundColor:"rgba(255, 0, 0, 0.1)",fill:true}]},options:{responsive:true,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:false}},scales:{x:{title:{display:true,text:"Date"}},y:{title:{display:true,text:"Value (VND)"}}}}});const tfs=cf(data.data,t,t);ufe("t-fluctuations",tfs);const yesterday=new Date(t);yesterday.setDate(t.getDate()-1);const oneDayFluctuations=cf(data.data,yesterday,t);ufe("1day-fluctuations",oneDayFluctuations);const oneWeekAgo=new Date(t);oneWeekAgo.setDate(t.getDate()-7);const oneWeekFluctuations=cf(data.data,oneWeekAgo,t);ufe("1week-fluctuations",oneWeekFluctuations)});
</script></body></html>
